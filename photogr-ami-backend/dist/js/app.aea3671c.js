(function(e){function t(t){for(var n,s,r=t[0],l=t[1],c=t[2],p=0,m=[];p<r.length;p++)s=r[p],o[s]&&m.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,r=1;r<i.length;r++){var l=i[r];0!==o[l]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=i[0]))}return e}var n={},o={app:0},a=[];function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"0047":function(e,t,i){"use strict";var n=i("be86"),o=i.n(n);o.a},"075c":function(e,t,i){},1:function(e,t){},1763:function(e,t,i){},1796:function(e,t,i){"use strict";var n=i("de8c"),o=i.n(n);o.a},"2fa9":function(e,t,i){},"352b":function(e,t,i){"use strict";var n=i("1763"),o=i.n(n);o.a},"35bc":function(e,t,i){},"42cb":function(e,t,i){},"45dd":function(e,t,i){},"50f5":function(e,t,i){"use strict";var n=i("ee27"),o=i.n(n);o.a},"54b6":function(e,t,i){"use strict";var n=i("2fa9"),o=i.n(n);o.a},"55f7":function(e,t,i){"use strict";var n=i("ec16"),o=i.n(n);o.a},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("097d");var n=i("2b0e"),o=i("8055"),a=i.n(o),s=i("cee2"),r=i.n(s),l=i("bc3a"),c=i.n(l),u=i("ecee"),p=i("c074"),m=i("ad3d"),h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("html",[e._m(0),i("body",[i("div",{attrs:{id:"app"}},[i("header-haut"),i("router-view"),i("footer-bas")],1)])])},f=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("head",[i("meta",{attrs:{charset:"UTF-8"}}),i("title",[e._v("Messages Pro+")])])}],v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",[e.utilisateurConnecte?i("div",{staticClass:"header"},[i("router-link",{attrs:{id:"logo",to:"/"}},[i("font-awesome-icon",{attrs:{icon:"camera-retro"}})],1),i("div",{staticClass:"header-recherche"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.texteRecherche,expression:"texteRecherche"}],attrs:{type:"text",placeholder:"Rechercher..",maxlength:"40"},domProps:{value:e.texteRecherche},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.pageRecherche(t):null},input:[function(t){t.target.composing||(e.texteRecherche=t.target.value)},function(t){e.afficheListe()}],click:function(t){e.afficheListe()}}}),i("div",{staticClass:"recherche-suggestion",class:{"disparait-animation":""==e.texteRecherche.trim()||0==e.afficheSuggestion,"apparait-animation":""!=e.texteRecherche.trim()&&e.afficheSuggestion,invisible:e.animation}},[i("ul",[e._l(e.listeRechercheSuggestion,function(t,n){return i("li",{key:t._id,attrs:{value:n},on:{click:function(i){e.pageProfil(t.nomUtilisateur)}}},[e._v(e._s(t.prenom)+" "+e._s(t.nom))])}),e.listeRechercheSuggestion.length>0?i("li",{on:{click:e.pageRecherche}},[e._v("\n            Voir tous les résultats pour\n            "),i("b",[e._v("« "+e._s(e.texteRecherche.trim())+" »")])]):i("li",[e._v("Il n'y a aucun résultat pour\n            "),i("b",[e._v("« "+e._s(e.texteRecherche.trim())+" »")])])],2)])]),i("ul",{staticClass:"barre-navigation"},[i("router-link",{attrs:{to:"/FilActualite"}},[i("li",{attrs:{title:"Fil d'actualité"}},[i("font-awesome-icon",{attrs:{icon:"home"}})],1)]),i("router-link",{attrs:{to:"/Profil"}},[i("li",{attrs:{title:"Votre profil"}},[i("font-awesome-icon",{attrs:{icon:"user"}})],1)]),i("router-link",{attrs:{to:"/Conversation",title:"Vos conversations"}},[i("li",[i("font-awesome-icon",{attrs:{icon:"envelope"}})],1)]),i("router-link",{attrs:{to:"/Reglages",title:"Réglages"}},[i("li",[i("font-awesome-icon",{attrs:{icon:"cog"}})],1)])],1)],1):i("div",{staticClass:"header v2"},[i("router-link",{attrs:{id:"logo-v2",to:"/"}},[i("font-awesome-icon",{attrs:{icon:"camera-retro"}}),i("h1",[e._v("Photogr-ami")])],1)],1),i("div",{staticClass:"slider",class:{close:e.popupHide},on:{click:e.redirectionConversation}},[i("article",{staticClass:"message"},[i("div",{staticClass:"message-header"},[i("b",[e._v("Nouveau message de "+e._s(e.notificationNom))])]),i("div",{staticClass:"message-body"},[e._v("\n        "+e._s(e.notificationMessage)+"\n      ")])])])])},d=[],g=(i("f559"),i("a481"),{tokenVide:function(){var e=JSON.parse(localStorage.getItem("token"));return!e&&(this.deconnexion(),!0)},verifieToken:function(){var e=this;if(null!=JSON.parse(localStorage.getItem("token"))){var t={headers:{"Content-Type":"application/json","x-auth-token":JSON.parse(localStorage.getItem("token"))}};c.a.get("/api/compte/moi",t).then(function(){}).catch(function(){e.deconnexion(),e.redirect()})}},redirect:function(){window.location.replace("/"),window.location.reload()},deconnexion:function(){localStorage.removeItem("token"),localStorage.removeItem("conversation")}}),b={data:function(){return{texteRecherche:this.$route.params.input||"",utilisateurConnecte:!1,afficheSuggestion:!1,listeRechercheSuggestion:Array,animation:!0,popupHide:!0,notificationId:"",notificationNom:"",notificationMessage:"",notificationVar:null}},mounted:function(){var e=this;this.socket.on("NOTIFICATION_CONVERSATION_MESSAGE",function(t,i){i!==e.$store.state.utilisateur.nomUtilisateur||e.$route.path.startsWith("/Conversation")||(e.notificationId=t[0].idConversation,e.notificationNom=t[1].dernierUtilisateurEnvoi,e.notificationMessage=t[1].dernierMessage,e.popupHide=!1,null!==e.notificationVar&&clearTimeout(e.notificationVar),e.notificationVar=setTimeout(e.closePopup,5e3))})},watch:{$route:function(){this.afficheSuggestion=!1}},created:function(){this.$store.dispatch("infoUtilisateur"),setTimeout(this.changeAnimation,300),this.utilisateurConnecte=this.verifieUtilisateurConnecte()},methods:{closePopup:function(){this.popupHide=!0},redirectionConversation:function(){this.$router.push("/Conversation/".concat(this.notificationId))},changeAnimation:function(){this.animation=!1},pageRecherche:function(){this.afficheSuggestion=!1,""!==this.texteRecherche.trim()&&this.$router.push("/Recherche/".concat(this.texteRecherche))},pageProfil:function(e){this.afficheSuggestion=!1,this.$router.push("/Profil/".concat(e))},verifieUtilisateurConnecte:function(){var e=g.tokenVide();return!e},afficheListe:function(){var e=this;this.afficheSuggestion=!0,""!==this.texteRecherche.trim()&&this.$http.get("/compte/recherche/".concat(this.texteRecherche),this.config).then(function(t){e.listeRechercheSuggestion=t.data.slice(0,3)})}}},P=b,_=(i("0047"),i("2877")),C=Object(_["a"])(P,v,d,!1,null,null,null);C.options.__file="Header.vue";var A=C.exports,I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.utilisateurConnecte?i("footer",[i("ul",{staticClass:"barre-navigation"},[i("router-link",{attrs:{to:"/FilActualite"}},[i("li",[i("font-awesome-icon",{attrs:{icon:"home"}})],1)]),i("router-link",{attrs:{to:"/Profil"}},[i("li",[i("font-awesome-icon",{attrs:{icon:"user"}})],1)]),i("router-link",{attrs:{to:"/Conversation"}},[i("li",[i("font-awesome-icon",{attrs:{icon:"envelope"}})],1)]),i("router-link",{attrs:{to:"/Reglages"}},[i("li",[i("font-awesome-icon",{attrs:{icon:"cog"}})],1)])],1)]):e._e()},x=[],E={data:function(){return{utilisateurConnecte:!1}},created:function(){this.utilisateurConnecte=this.verifieUtilisateurConnecte()},methods:{verifieUtilisateurConnecte:function(){var e=g.tokenVide();return!e}}},k=E,$=(i("b3ed"),Object(_["a"])(k,I,x,!1,null,null,null));$.options.__file="Footer.vue";var y=$.exports,U={name:"app",components:{"header-haut":A,"footer-bas":y}},S=U,L=(i("5c0b"),Object(_["a"])(S,h,f,!1,null,null,null));L.options.__file="App.vue";var N=L.exports,M=i("8c4f"),w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"authentication"},[e._m(0),i("div",{staticClass:"boite-formulaire"},[i("ul",{staticClass:"onglet-authentication"},[i("li",{staticClass:"no-selection",class:{active:e.ongletConnexion},on:{click:function(t){e.changeOngletAuth(1)}}},[e._v("Connexion")]),i("li",{staticClass:"no-selection",class:{active:e.ongletInscription},on:{click:function(t){e.changeOngletAuth(2)}}},[e._v("Inscription")])]),e.ongletConnexion?i("div",{staticClass:"formulaire"},[e.erreurConnexion?i("span",[e._v("\n        Nom d'utilisateur/Email et mot de passe invalide.\n      ")]):e._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:e.identifiant,expression:"identifiant"}],class:{boiteErreur:e.erreurConnexion},attrs:{type:"text",placeholder:"Nom d'utilisateur ou email",maxlength:"254"},domProps:{value:e.identifiant},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.connexion(t):null},input:function(t){t.target.composing||(e.identifiant=t.target.value)}}}),i("span"),i("input",{directives:[{name:"model",rawName:"v-model",value:e.motDePasse,expression:"motDePasse"}],class:{boiteErreur:e.erreurConnexion},attrs:{type:"password",placeholder:"Mot de passe",maxlength:"60"},domProps:{value:e.motDePasse},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.connexion(t):null},input:function(t){t.target.composing||(e.motDePasse=t.target.value)}}}),i("button",{on:{click:e.connexion}},[e._v("Se connecter")]),e.chargementConnexion?i("div",{staticClass:"loader"}):e._e()]):e._e(),e.ongletInscription?i("div",{staticClass:"formulaire"},[e.prenomInvalide?i("span",[e._v("\n        Le prénom doit contenir au moins 2 caractères\n      ")]):i("span",{staticClass:"vide"}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.prenom,expression:"prenom"}],class:{boiteErreur:e.prenomInvalide},attrs:{type:"text",placeholder:"Prénom",maxlength:"35"},domProps:{value:e.prenom},on:{blur:e.verifiePrenom,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.creerCompte(t):null},input:function(t){t.target.composing||(e.prenom=t.target.value)}}}),e.nomInvalide?i("span",[e._v("\n        Le nom de famille doit contenir au moins 2 caractères\n      ")]):i("span",{staticClass:"vide"}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.nom,expression:"nom"}],class:{boiteErreur:e.nomInvalide},attrs:{type:"text",placeholder:"Nom de famille",maxlength:"35"},domProps:{value:e.nom},on:{blur:e.verifieNom,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.creerCompte(t):null},input:function(t){t.target.composing||(e.nom=t.target.value)}}}),e.nomUtilisateurInvalide||e.nomUtilisateurInvalideCaractere||e.nomUtilisateurExiste?i("span",[e.nomUtilisateurInvalide?i("p",[e._v("\n          Le nom d'utilisateur doit contenir au moins 6 caractères\n        ")]):e._e(),e.nomUtilisateurInvalideCaractere?i("p",[e._v("\n          Le nom d'utilisateur ne doit pas contenir le caractère @\n        ")]):e._e(),e.nomUtilisateurExiste?i("p",[e._v("Un compte avec ce nom d'utilisateur existe déjà")]):e._e()]):i("span",{staticClass:"vide"}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.nomUtilisateur,expression:"nomUtilisateur"}],class:{boiteErreur:e.nomUtilisateurInvalide||e.nomUtilisateurInvalideCaractere||e.nomUtilisateurExiste},attrs:{type:"text",placeholder:"Nom d'utilisateur",maxlength:"15"},domProps:{value:e.nomUtilisateur},on:{blur:e.verifieNomUtilisateur,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.creerCompte(t):null},input:function(t){t.target.composing||(e.nomUtilisateur=t.target.value)}}}),e.emailInvalide||e.emailExiste?i("span",[e.emailInvalide?i("p",[e._v("L'email doit être valide")]):e._e(),e.emailExiste?i("p",[e._v("Un compte avec cet adresse email existe déjà")]):e._e()]):i("span",{staticClass:"vide"}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],class:{boiteErreur:e.emailInvalide||e.emailExiste},attrs:{type:"email",placeholder:"Adresse Email",maxlength:"254"},domProps:{value:e.email},on:{blur:e.verifieEmail,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.creerCompte(t):null},input:function(t){t.target.composing||(e.email=t.target.value)}}}),e.motDePasseInvalide?i("span",[e._v("\n        Le mot de passe doit contenir au moins 7 caractères\n      ")]):i("span",{staticClass:"vide"}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.nouveauMotDePasse,expression:"nouveauMotDePasse"}],class:{boiteErreur:e.motDePasseInvalide},attrs:{type:"password",placeholder:"Mot de passe",maxlength:"60"},domProps:{value:e.nouveauMotDePasse},on:{blur:e.verifieMotDePasse,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.creerCompte(t):null},input:function(t){t.target.composing||(e.nouveauMotDePasse=t.target.value)}}}),i("div",{staticClass:"option"},[i("span",[e._v("Sexe: ")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.sexe,expression:"sexe"}],attrs:{name:"sexe"},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.creerCompte(t):null},change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.sexe=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"Homme"}},[e._v("Homme")]),i("option",{attrs:{value:"Femme"}},[e._v("Femme")]),i("option",{attrs:{value:"Autre"}},[e._v("Autre")])])]),i("button",{on:{click:e.creerCompte}},[e._v("S'inscrire")]),e.chargementInscription?i("div",{staticClass:"loader"}):e._e()]):e._e()]),i("div",{staticClass:"footer"},[i("div",[i("router-link",{attrs:{to:"/"}},[i("font-awesome-icon",{attrs:{icon:"camera-retro"}}),e._v(" Photogr-ami")],1),e._v("\n          © 2019 \n        ")],1),e._m(1)])])},R=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"page-principale"},[i("div",{staticClass:"principale-partie-un"},[i("h2",[e._v("Site de partage de photos.")]),i("h2",[e._v(" Simplifié.")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("Web Design par "),i("a",{attrs:{href:"mailto:quoclongvan@gmail.com"}},[e._v("Quoc Long Van")])])}],O=(i("3b2b"),i("f499")),D=i.n(O),j={data:function(){return{ongletConnexion:!0,ongletInscription:!1,erreurConnexion:!1,chargementConnexion:!1,chargementInscription:!1,prenom:"",nom:"",email:"",nomUtilisateur:"",sexe:"Homme",nouveauMotDePasse:"",identifiant:"",motDePasse:"",prenomInvalide:!1,nomInvalide:!1,emailInvalide:!1,emailExiste:!1,nomUtilisateurInvalide:!1,nomUtilisateurInvalideCaractere:!1,nomUtilisateurExiste:!1,motDePasseInvalide:!1}},methods:{changeOngletAuth:function(e){1===e?(this.ongletConnexion=!0,this.ongletInscription=!1,this.afficheModifProfil=!1):2===e&&(this.ongletConnexion=!1,this.ongletInscription=!0)},creerCompte:function(){var e=this;this.chargementInscription=!0,this.$http.post("/compte/",{prenom:this.prenom,nom:this.nom,email:this.email,nomUtilisateur:this.nomUtilisateur,motDePasse:this.nouveauMotDePasse,sexe:this.sexe},this.config).then(function(){e.prenom="",e.nom="",e.email="",e.nomUtilisateur="",e.nouveauMotDePasse="",e.changeOngletAuth(1),e.chargementInscription=!1}).catch(function(){setTimeout(e.fermeChargementInscription,750)})},connexion:function(){var e=this;this.chargementConnexion=!0,this.$http.post("/authentication/",{identifiant:this.identifiant,motDePasse:this.motDePasse},this.config).then(function(t){e.chargementConnexion=!1,localStorage.setItem("token",D()(t.data)),window.location.reload()}).catch(function(){setTimeout(e.fermeChargementConnexion,750)})},fermeChargementConnexion:function(){this.chargementConnexion=!1,this.erreurConnexion=!0},fermeChargementInscription:function(){this.verifiePrenom(),this.verifieNom(),this.verifieNomUtilisateur(),this.verifieEmail(),this.verifieMotDePasse(),this.chargementInscription=!1},verifiePrenom:function(){this.prenom.trim().length<2?this.prenomInvalide=!0:this.prenomInvalide=!1},verifieNom:function(){this.nom.trim().length<2?this.nomInvalide=!0:this.nomInvalide=!1},verifieEmail:function(){var e=this,t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.$http.get("/compte/recherche-email/".concat(this.email),this.config).then(function(){e.emailExiste=!1,e.emailInvalide=!t.test(String(e.email).toLowerCase())}).catch(function(){t.test(String(e.email).toLowerCase())?(e.emailExiste=!0,e.emailInvalide=!1):(e.emailExiste=!1,e.emailInvalide=!0)})},verifieNomUtilisateur:function(){var e=this;this.$http.get("/compte/recherche-nom-utilisateur/".concat(this.nomUtilisateur),this.config).then(function(){0!==e.nomUtilisateur.trim().length?(e.nomUtilisateurExiste=!0,e.nomUtilisateurInvalide=!1):(e.nomUtilisateurExiste=!1,e.nomUtilisateurInvalide=!0)}).catch(function(){e.nomUtilisateurExiste=!1,e.nomUtilisateur.trim().length<6?e.nomUtilisateurInvalide=!0:e.nomUtilisateurInvalide=!1;var t=new RegExp("^(?!.*@).*$");t.test(e.nomUtilisateur.trim())?e.nomUtilisateurInvalideCaractere=!1:(e.nomUtilisateurInvalideCaractere=!0,e.nomUtilisateurInvalide=!1)})},verifieMotDePasse:function(){this.nouveauMotDePasse.length<7?this.motDePasseInvalide=!0:this.motDePasseInvalide=!1}}},T=j,F=(i("d66a"),Object(_["a"])(T,w,R,!1,null,null,null));F.options.__file="PagePrincipale.vue";var V=F.exports,q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("popup-supprimer-publication",{attrs:{idPublication:e.supprimePublication},on:{close:function(t){e.supprimePublication=null}}}),i("popup-supprimer-commentaire",{attrs:{idCommentaire:e.supprimeCommentaire,idPublication:e.publicationSelection},on:{close:function(t){e.supprimeCommentaire=null}}}),i("popup-nouvelle-publication",{attrs:{affiche:e.popupNouvellePublication},on:{close:function(t){e.popupNouvellePublication=!1}}}),i("popup-liste",{attrs:{typeListe:e.typeListe,listeUtilisateur:e.listeAime},on:{close:function(t){e.typeListe=null}}}),i("section",{staticClass:"fil-actualite"},[i("div",{staticClass:"selection-fil-actualite no-selection"},[i("div",{staticClass:"radius-left radius-right",attrs:{title:"Publier une nouvelle publication"},on:{click:function(t){e.popupNouvellePublication=!0}}},[i("font-awesome-icon",{attrs:{icon:"plus-square"}}),e._v(" Publication\n      ")],1),i("div",{staticClass:"radius-left",class:{active:e.ongletAbonnement},attrs:{title:"Liste des publications de vos abonnements"},on:{click:function(t){e.changeOngletPublication(1)}}},[e._v("\n        Abonnement\n      ")]),i("div",{staticClass:"radius-right",class:{active:e.ongletPopulaire},attrs:{title:"Liste des publications les plus populaires"},on:{click:function(t){e.changeOngletPublication(2)}}},[e._v("\n        Populaire\n      ")])]),e.ongletAbonnement?i("div",[e._l(e.listePublicationAbonnement,function(t,n){return i("div",{key:t._id,staticClass:"background-publication",attrs:{value:n}},[i("affichage-une-publication",{attrs:{objetPublication:t},on:{setIDPublication:e.supprimerPublication,setIDCommentaire:e.supprimerCommentaire,setListeAime:e.afficheListeAime}})],1)}),0==e.listePublicationAbonnement.length?i("div",{staticClass:"aucune-publication fil"},[e._v("\n        Il n'y a aucune publication à afficher, vous pouvez commencer\n        à suivre les utilisateurs que vous connaissez.\n      ")]):i("div",{staticClass:"page-selection"},[i("div",[e._v("\n          Page\n          "),i("button",{attrs:{disabled:!e.boutonAbonnementPrecedentActive,title:"Page précédente"},on:{click:function(t){e.setPage(e.pageAbonnementActuel-1,1)}}},[e._v(" < ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.pageAbonnementInput,expression:"pageAbonnementInput"}],attrs:{type:"number",min:"1"},domProps:{value:e.pageAbonnementInput},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.setPage(e.pageAbonnementInput,1)},input:function(t){t.target.composing||(e.pageAbonnementInput=t.target.value)}}}),i("button",{attrs:{disabled:!e.boutonAbonnementSuivantActive,title:"Page suivante"},on:{click:function(t){e.setPage(e.pageAbonnementActuel+1,1)}}},[e._v(" > ")])])])],2):e._e(),e.ongletPopulaire?i("div",[e._l(e.listePublicationPopulaire,function(t,n){return i("div",{key:t._id,staticClass:"background-publication",attrs:{value:n}},[i("affichage-une-publication",{attrs:{objetPublication:t},on:{setIDPublication:e.supprimerPublication,setIDCommentaire:e.supprimerCommentaire,setListeAime:e.afficheListeAime}})],1)}),0==e.listePublicationPopulaire.length?i("div",{staticClass:"aucune-publication fil"},[e._v("\n        Il n'y a aucune publication à afficher.\n      ")]):i("div",{staticClass:"page-selection"},[i("div",[e._v("\n          Page\n          "),i("button",{attrs:{disabled:!e.boutonPopulairePrecedentActive,title:"Page précédente"},on:{click:function(t){e.setPage(e.pagePopulaireActuel-1,2)}}},[e._v(" < ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.pagePopulaireInput,expression:"pagePopulaireInput"}],attrs:{type:"number",min:"1"},domProps:{value:e.pagePopulaireInput},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.setPage(e.pagePopulaireInput,2)},input:function(t){t.target.composing||(e.pagePopulaireInput=t.target.value)}}}),i("button",{attrs:{disabled:!e.boutonPopulaireSuivantActive,title:"Page suivante"},on:{click:function(t){e.setPage(e.pagePopulaireActuel+1,2)}}},[e._v(" > ")])])])],2):e._e()])],1)},B=[],z=(i("c5f6"),i("795b")),H=i.n(z),G=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("section",{staticClass:"une-publication"},[i("div",{staticClass:"publication"},[i("div",{staticClass:"titre-une-publication"},[i("h2",{attrs:{id:"popup"},on:{click:e.fermerPopup}},[i("font-awesome-icon",{attrs:{icon:"angle-left"}})],1),i("h1",[i("router-link",{attrs:{to:"/Profil/"+e.objetPublication.auteur}},[e._v("\n        "+e._s(e.objetPublication.auteur)+"\n        ")])],1),this.$store.state.utilisateur.nomUtilisateur==e.objetPublication.auteur?i("b",{on:{click:function(t){e.supprimePublication(e.objetPublication._id)}}},[i("font-awesome-icon",{attrs:{icon:"ban"}})],1):e._e()]),i("div",{staticClass:"publication-image"},[i("div",{staticClass:"shadow",style:"background-image: url(/"+e.objetPublication.photo+";"}),i("img",{attrs:{src:"/"+e.objetPublication.photo,alt:"",draggable:"false"}})]),i("div",{staticClass:"publication-interaction"},[i("div",{staticClass:"description-publication"},[e._v("\n          "+e._s(e.objetPublication.description)+"\n        ")]),i("span",[e._v("Publié le "+e._s(e.dateFormat(e.objetPublication.date)))]),i("span",[i("span",{staticClass:"hoverable",attrs:{title:"Voir les mentions j'aime"},on:{click:function(t){e.afficheListeAime()}}},[e._v(e._s(e.nombreAime)+" J'aime")]),e._v("\n          - "+e._s(e.listeCommentaire.length)+"\n          Commentaire"),e.listeCommentaire.length>1?i("span",[e._v("s")]):e._e()]),i("div",{staticClass:"publication-bouton"},[e.statusAime?i("button",{on:{click:e.changeStatusAime}},[e._v("Je n'aime plus")]):i("button",{on:{click:e.changeStatusAime}},[e._v("J'aime")]),i("button",{on:{click:function(t){e.$refs.commentaire.focus()}}},[e._v("Commenter")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.texteEnvoi,expression:"texteEnvoi"}],ref:"commentaire",attrs:{type:"text",placeholder:"Écrire un commentaire.."},domProps:{value:e.texteEnvoi},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.envoiCommentaire(t):null},input:function(t){t.target.composing||(e.texteEnvoi=t.target.value)}}}),e.listeCommentaire.length>0?i("div",{staticClass:"publication-commentaire"},e._l(e.listeCommentaire,function(t,n){return i("span",{key:t._id,attrs:{value:n}},[i("p",[t.auteur===e.nomUtilisateur?i("button",{on:{click:function(i){e.supprimeCommentaire(t._id)}}},[e._v("X")]):e.objetPublication.auteur===e.nomUtilisateur?i("button",{on:{click:function(i){e.supprimeCommentaire(t._id)}}},[e._v("X")]):e._e(),i("b",[i("router-link",{attrs:{to:"/Profil/"+t.auteur}},[e._v("\n                  "+e._s(t.auteur)+"\n                ")])],1),e._v(" "+e._s(t.commentaire)+"\n            ")]),i("div",{staticClass:"commentaire-date"},[e._v(e._s(e.dateCommentaire(t.date)))])])}),0):i("div",{staticClass:"publication-commentaire"},[e._m(0)])])])])])},J=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[i("p",[e._v("Il n'y a pas de commentaire pour l'instant.\n              Vous pouvez commenter cette publication.")])])}],Q=(i("6b54"),{props:{objetPublication:{required:!1,type:Object}},data:function(){return{nombreAime:Number,statusAime:!1,typeListe:null,listeCommentaire:Array,texteEnvoi:"",nomUtilisateur:this.$store.state.utilisateur.nomUtilisateur}},mounted:function(){var e=this;this.socket.on("UPDATE_COMMENTAIRE",function(t){e.objetPublication._id===t&&e.afficheCommmentaire()})},watch:{objetPublication:function(){this.nombreAime=Number(this.objetPublication.listeUtilisateurAime.length),-1!==this.objetPublication.listeUtilisateurAime.indexOf(this.$store.state.utilisateur.nomUtilisateur)?this.statusAime=!0:this.statusAime=!1}},methods:{fermerPopup:function(){this.supprimePublication=null,this.$emit("fermerPopup")},dateFormat:function(e){var t=new Date(e);return"".concat(t.toLocaleDateString("fr-CA",{year:"numeric",month:"long",day:"numeric"})," à ").concat(t.getHours(),"h").concat((t.getMinutes()<10?"0":"")+t.getMinutes())},changeStatusAime:function(){var e=this;this.$http.put("/publication/change-status/".concat(this.objetPublication._id),{},this.config).then(function(){e.$socket.emit("UPDATE_PROFIL",e.objetPublication.auteur),e.$socket.emit("UPDATE_PUBLICATION_SPECIFIQUE",e.objetPublication.auteur),e.$socket.emit("UPDATE_PUBLICATION_TOUT")})},supprimePublication:function(e){this.$emit("setIDPublication",e)},supprimeCommentaire:function(e){this.$emit("setIDCommentaire",e,this.objetPublication._id)},afficheListeAime:function(){this.$emit("setListeAime",this.objetPublication.listeUtilisateurAime)},afficheCommmentaire:function(){var e=this;this.$http.get("/commentaire/".concat(this.objetPublication._id),this.config).then(function(t){e.listeCommentaire=t.data})},dateCommentaire:function(e){var t=new Date(e),i="".concat((t.getDate()<10?"0":"")+t.getDate(),"/").concat((t.getMonth()<10?"0":"")+(t.getMonth()+1),"/").concat(t.getFullYear().toString().substr(-2)," à ").concat(t.getHours(),"h").concat((t.getMinutes()<10?"0":"")+t.getMinutes());return i},envoiCommentaire:function(){var e=this;""!==this.texteEnvoi.trim()&&this.$http.post("/commentaire/",{idPublication:this.objetPublication._id,commentaire:this.texteEnvoi},this.config).then(function(){e.$socket.emit("UPDATE_COMMENTAIRE",e.objetPublication._id),e.texteEnvoi=""})}},created:function(){this.nombreAime=Number(this.objetPublication.listeUtilisateurAime.length),-1!==this.objetPublication.listeUtilisateurAime.indexOf(this.$store.state.utilisateur.nomUtilisateur)?this.statusAime=!0:this.statusAime=!1,this.afficheCommmentaire()}}),Z=Q,Y=(i("50f5"),Object(_["a"])(Z,G,J,!1,null,null,null));Y.options.__file="AffichageUnePublication.vue";var W=Y.exports,X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.affiche?i("div",{staticClass:"popup",on:{click:e.fermerPopupExterieur}},[i("div",{staticClass:"modif-photo-profil"},[i("section",[i("h2",{attrs:{id:"popup"},on:{click:e.fermerPopup}},[i("font-awesome-icon",{attrs:{icon:"angle-left"}})],1),i("h1",[e._v("Nouvelle publication")]),i("span",[e._v("Sélectionner la photo:")]),i("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.changementImage}}),i("span",{class:{"erreur-fort":e.erreurImage}},[e._v("L'image doit être de type JPEG\n        ou PNG et ne doit pas dépasser 5 Mo")]),e.apercuImage?i("div",[i("h3",[e._v("Aperçu de la photo:")]),i("div",{attrs:{id:"image"}})]):e._e(),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],ref:"description",attrs:{type:"text",placeholder:"Entrez une description pour la photo.."},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),i("div",[i("button",{on:{click:e.fermerPopup}},[e._v("Annuler")]),e.apercuImage?i("button",{on:{click:e.publierPhoto}},[e._v("Publier")]):e._e()]),e.chargementPublication?i("div",{staticClass:"loader"}):e._e()])])]):e._e()},K=[],ee=(i("7f7f"),i("4917"),{props:{affiche:{type:Boolean}},data:function(){return{imageSelectionner:null,apercuImage:!1,description:"",chargementPublication:!1,erreurImage:!1}},watch:{affiche:function(){this.imageSelectionner=null,this.apercuImage=!1,this.description="",this.erreurImage=!1,this.chargementPublication=!1}},methods:{changementImage:function(e){var t=new FileReader;e.target.files[0].type.match("image.*")?(this.apercuImage=!0,this.imageSelectionner=e.target.files[0],this.$refs.description.focus()):(this.apercuImage=!1,this.imageSelectionner=null),t.onload=function(e){document.getElementById("image").style.backgroundImage="url('".concat(e.target.result,"')")},t.readAsDataURL(this.imageSelectionner)},fermerPopup:function(){this.$emit("close")},fermerPopupExterieur:function(e){"popup"===e.target.className&&this.$emit("close")},publierPhoto:function(){var e=this;if(!this.chargementPublication){this.erreurImage=!1,this.chargementPublication=!0;var t=new FormData;t.append("publicationImage",this.imageSelectionner,this.imageSelectionner.name),""!==this.description.trim()&&t.append("description",this.description),this.$http.post("/publication/",t,this.config).then(function(){e.fermerPopup(),e.$socket.emit("UPDATE_PROFIL",e.$store.state.utilisateur.nomUtilisateur),e.$socket.emit("UPDATE_PUBLICATION_SPECIFIQUE",e.$store.state.utilisateur.nomUtilisateur),e.$socket.emit("UPDATE_PUBLICATION_TOUT")}).catch(function(){e.chargementPublication=!1,e.erreurImage=!0})}}}}),te=ee,ie=(i("54b6"),Object(_["a"])(te,X,K,!1,null,"2beb025d",null));ie.options.__file="PopupNouvellePublication.vue";var ne=ie.exports,oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.idPublication?i("div",{staticClass:"popup",on:{click:e.fermerPopupExterieur}},[i("div",{staticClass:"modif-photo-profil"},[i("section",[i("h2",{attrs:{id:"popup"},on:{click:e.fermerPopup}},[i("font-awesome-icon",{attrs:{icon:"angle-left"}})],1),i("h1",[e._v("Supprimer la publication?")]),i("span",[e._v("Voulez-vous vraiment supprimer la publication? Cette action est irréversible")]),i("div",[i("button",{on:{click:e.fermerPopup}},[e._v("Annuler")]),i("button",{on:{click:e.supprimePublication}},[e._v("Supprimer")])])])])]):e._e()},ae=[],se={props:{idPublication:{type:String,required:!1}},methods:{fermerPopup:function(){this.$emit("close")},fermerPopupExterieur:function(e){"popup"===e.target.className&&this.$emit("close")},supprimePublication:function(){var e=this;this.$http.delete("/publication/".concat(this.idPublication),this.config).then(function(){e.$emit("close"),e.$socket.emit("UPDATE_PROFIL",e.$store.state.utilisateur.nomUtilisateur),e.$socket.emit("UPDATE_PUBLICATION_SPECIFIQUE",e.$store.state.utilisateur.nomUtilisateur),e.$socket.emit("UPDATE_PUBLICATION_TOUT")})}}},re=se,le=(i("1796"),Object(_["a"])(re,oe,ae,!1,null,"7c7a28fb",null));le.options.__file="PopupSupprimerPublication.vue";var ce=le.exports,ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.idCommentaire?i("div",{staticClass:"popup",on:{click:e.fermerPopupExterieur}},[i("div",{staticClass:"modif-photo-profil"},[i("section",[i("h2",{attrs:{id:"popup"},on:{click:e.fermerPopup}},[i("font-awesome-icon",{attrs:{icon:"angle-left"}})],1),i("h1",[e._v("Supprimer le commentaire?")]),i("span",[e._v("Voulez-vous vraiment supprimer le commentaire? Cette action est irréversible")]),i("div",[i("button",{on:{click:e.fermerPopup}},[e._v("Annuler")]),i("button",{on:{click:e.supprimeCommentaire}},[e._v("Supprimer")])])])])]):e._e()},pe=[],me={props:{idCommentaire:{type:String,required:!1},idPublication:{type:String,required:!1}},methods:{fermerPopup:function(){this.$emit("close")},fermerPopupExterieur:function(e){"popup"===e.target.className&&this.$emit("close")},supprimeCommentaire:function(){var e=this;this.$http.delete("/commentaire/".concat(this.idCommentaire),this.config).then(function(){e.$socket.emit("UPDATE_COMMENTAIRE",e.idPublication),e.$emit("close")})}}},he=me,fe=(i("7eeb"),Object(_["a"])(he,ue,pe,!1,null,"5d3441ac",null));fe.options.__file="PopupSupprimerCommentaire.vue";var ve=fe.exports,de=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.typeListe?i("div",{staticClass:"popup",on:{click:e.fermerPopupExterieur}},[i("div",{staticClass:"liste-abonnement"},[i("section",[i("h2",{attrs:{id:"popup"},on:{click:e.fermerPopup}},[i("font-awesome-icon",{attrs:{icon:"angle-left"}})],1),"abonnés"===e.typeListe||"abonnement"===e.typeListe?i("h1",[e._v("Liste d'"+e._s(e.typeListe))]):i("h1",[e._v("Liste de mention j'aime")]),0===e.listeUtilisateur.length?i("ul",{staticClass:"liste-recherche"},["abonnés"===e.typeListe||"abonnement"===e.typeListe?i("li",{attrs:{id:"listeVide"}},[e._v("Aucun "+e._s(e.typeListe))]):i("li",{attrs:{id:"listeVide"}},[e._v("Aucun mention j'aime")])]):i("ul",{staticClass:"liste-recherche"},e._l(e.listeUtilisateur,function(t,n){return i("router-link",{key:n,attrs:{to:"/Profil/"+t,value:n}},[i("li",[e._v(e._s(t))])])}),1)])])]):e._e()},ge=[],be={props:{typeListe:{required:!1,type:String},listeUtilisateur:{required:!1,type:Array}},methods:{fermerPopup:function(){this.$emit("close")},fermerPopupExterieur:function(e){"popup"===e.target.className&&this.$emit("close")}}},Pe=be,_e=(i("ef65"),Object(_["a"])(Pe,de,ge,!1,null,null,null));_e.options.__file="PopupListe.vue";var Ce=_e.exports,Ae={data:function(){return{ongletAbonnement:!0,ongletPopulaire:!1,popupNouvellePublication:!1,listePublicationAbonnement:[],listePublicationPopulaire:[],supprimePublication:null,supprimeCommentaire:null,publicationSelection:null,pageAbonnementActuel:1,pageAbonnementInput:1,boutonAbonnementPrecedentActive:!1,boutonAbonnementSuivantActive:!1,pagePopulaireActuel:1,pagePopulaireInput:1,boutonPopulairePrecedentActive:!1,boutonPopulaireSuivantActive:!1,typeListe:null,listeAime:[]}},components:{AffichageUnePublication:W,PopupNouvellePublication:ne,PopupSupprimerPublication:ce,PopupSupprimerCommentaire:ve,PopupListe:Ce},mounted:function(){var e=this;this.socket.on("UPDATE_PUBLICATION_TOUT",function(){e.affichePublicationPopulaire()}),this.socket.on("UPDATE_PUBLICATION_SPECIFIQUE",function(t){t!==e.$store.state.utilisateur.nomUtilisateur&&-1===e.$store.state.utilisateur.listeAbonnement.indexOf(t)||e.affichePublicationAbonnement()})},created:function(){var e=this;H.a.resolve(this.$store.dispatch("infoUtilisateur")).then(function(){e.affichePublicationAbonnement(),e.affichePublicationPopulaire()})},methods:{changeOngletPublication:function(e){1===e?(this.ongletAbonnement=!0,this.ongletPopulaire=!1):2===e&&(this.ongletAbonnement=!1,this.ongletPopulaire=!0)},affichePublicationAbonnement:function(){var e=this;this.$http.get("/publication/abonnement/".concat(this.pageAbonnementInput),this.config).then(function(t){0===t.data.length&&1!==e.pageAbonnementInput?e.pageAbonnementInput=e.pageAbonnementActuel:0!==t.data.length?(e.listePublicationAbonnement=t.data,e.pageAbonnementActuel=e.pageAbonnementInput):0===t.data.length&&1===e.pageAbonnementInput&&(e.listePublicationAbonnement=t.data),1===e.pageAbonnementActuel?e.boutonAbonnementPrecedentActive=!1:e.boutonAbonnementPrecedentActive=!0}),this.$http.get("/publication/abonnement/".concat(this.pageAbonnementInput+1),this.config).then(function(t){0===t.data.length?e.boutonAbonnementSuivantActive=!1:e.boutonAbonnementSuivantActive=!0})},affichePublicationPopulaire:function(){var e=this;this.$http.get("/publication/populaire/".concat(this.pagePopulaireInput),this.config).then(function(t){0===t.data.length&&1!==e.pagePopulaireInput?e.pagePopulaireInput=e.pagePopulaireActuel:0!==t.data.length?(e.listePublicationPopulaire=t.data,e.pagePopulaireActuel=e.pagePopulaireInput):0===t.data.length&&1===e.pagePopulaireInput&&(e.listePublicationPopulaire=t.data),1===e.pagePopulaireActuel?e.boutonPopulairePrecedentActive=!1:e.boutonPopulairePrecedentActive=!0}),this.$http.get("/publication/populaire/".concat(this.pagePopulaireInput+1),this.config).then(function(t){0===t.data.length?e.boutonPopulaireSuivantActive=!1:e.boutonPopulaireSuivantActive=!0})},supprimerPublication:function(e){this.supprimePublication=e},supprimerCommentaire:function(e,t){this.supprimeCommentaire=e,this.publicationSelection=t},afficheListeAime:function(e){this.listeAime=e,this.typeListe="aime"},setPage:function(e,t){1===t?Number(e)<=0?this.pageAbonnementInput=this.pageAbonnementActuel:(this.pageAbonnementInput=Number(e),this.affichePublicationAbonnement()):2===t&&(Number(e)<=0?this.pagePopulaireInput=this.pagePopulaireActuel:(this.pagePopulaireInput=Number(e),this.affichePublicationPopulaire()))}}},Ie=Ae,xe=(i("fedb"),Object(_["a"])(Ie,q,B,!1,null,null,null));xe.options.__file="FilActualitePublication.vue";var Ee=xe.exports,ke=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"conversation"},[i("div",{staticClass:"liste-message",class:{invisibleMobile:e.mobileAfficheListeMessage}},[i("liste-message")],1),i("div",{staticClass:"boite-message",class:{invisibleMobile:!e.mobileAfficheListeMessage}},[i("affiche-un-message")],1)])},$e=[],ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h2",{on:{click:e.afficheListeMessage}},[i("font-awesome-icon",{attrs:{icon:"angle-left"}})],1),""!==e.nomAutreUtilisateur?i("h1",[i("router-link",{attrs:{to:"/Profil/"+e.nomAutreUtilisateur}},[e._v(e._s(e.titreConversation))])],1):i("h1",[e._v("\n    Veuillez sélectionner une conversation\n  ")]),e.afficheBoiteConversation?i("div",{staticClass:"zone-message"},e._l(e.listeMessageConversation,function(t,n){return i("div",{key:t._id,attrs:{value:n}},[t.auteur!=e.nomUtilisateur?i("div",{staticClass:"autre-utilisateur"},[i("span",[e._v(e._s(e.dateMessage(t.date)))]),i("span",[e._v(e._s(t.message))])]):e._e(),t.auteur==e.nomUtilisateur?i("div",{staticClass:"notre-message"},[i("span",[e._v(e._s(e.dateMessage(t.date)))]),i("span",[e._v(e._s(t.message))])]):e._e()])}),0):e._e(),e.afficheBoiteConversation?i("div",{staticClass:"zone-envoi"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.texteEnvoi,expression:"texteEnvoi"}],attrs:{type:"text",placeholder:"Tapez un message..."},domProps:{value:e.texteEnvoi},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.envoiMessage(t):null},input:function(t){t.target.composing||(e.texteEnvoi=t.target.value)}}}),i("button",{on:{click:e.envoiMessage}},[e._v("Envoyer")])]):e._e()])},Ue=[],Se={data:function(){return{nomUtilisateur:String,titreConversation:"",nomAutreUtilisateur:"",afficheBoiteConversation:!1,texteEnvoi:"",listeMessageConversation:[]}},mounted:function(){var e=this;this.socket.on("UPDATE_CONVERSATION_MESSAGE",function(t){t===localStorage.getItem("conversation")&&e.afficheMessageConversation()})},methods:{afficheListeMessage:function(){this.$parent.mobileAfficheListeMessage=!1,localStorage.removeItem("conversation")},afficheConversation:function(){var e=this;this.$http.get("/conversation/".concat(localStorage.getItem("conversation")),this.config).then(function(t){e.titreConversation=t.data.nomConversation,e.nomAutreUtilisateur=t.data.autreUtilisateur,e.afficheMessageConversation(),e.afficheBoiteConversation=!0}).catch(function(){localStorage.removeItem("conversation"),e.afficheBoiteConversation=!1,e.$parent.mobileAfficheListeMessage=!1})},afficheMessageConversation:function(){var e=this;H.a.resolve(this.$http.get("/message/".concat(localStorage.getItem("conversation")),this.config).then(function(t){e.listeMessageConversation=t.data})).then(function(){if(0!==e.listeMessageConversation.length){var t=document.getElementsByClassName("zone-message");t[0].scrollTop=t[0].scrollHeight}})},dateMessage:function(e){var t=new Date(e),i="".concat(t.getHours(),"h").concat((t.getMinutes()<10?"0":"")+t.getMinutes());return i},envoiMessage:function(){var e=this;""!==this.texteEnvoi.trim()&&this.$http.post("/message/",{idConversation:localStorage.getItem("conversation"),message:this.texteEnvoi},this.config).then(function(t){e.texteEnvoi="",e.$socket.emit("UPDATE_CONVERSATION_MESSAGE",localStorage.getItem("conversation")),e.$socket.emit("UPDATE_CONVERSATION_LISTE"),e.$socket.emit("NOTIFICATION_CONVERSATION_MESSAGE",t.data,e.nomAutreUtilisateur)})},configurerURL:function(){void 0!==this.$route.params.nom?(localStorage.setItem("conversation",this.$route.params.nom),this.$router.push("/Conversation/")):localStorage.getItem("conversation")&&(this.afficheConversation(),this.$parent.mobileAfficheListeMessage=!0)}},watch:{$route:function(){this.configurerURL()}},created:function(){var e=this;H.a.resolve(this.$store.dispatch("infoUtilisateur")).then(function(){e.nomUtilisateur=e.$store.state.utilisateur.nomUtilisateur,e.configurerURL()})}},Le=Se,Ne=(i("7152"),Object(_["a"])(Le,ye,Ue,!1,null,null,null));Ne.options.__file="AfficheUnMessage.vue";var Me=Ne.exports,we=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.afficheListeMessage?i("div",[i("button",{staticClass:"nouveau-message",attrs:{title:"Créer une conversation avec un autre utilisateur"},on:{click:function(t){e.afficheListeMessage=!1}}},[e._v("\n      Nouvelle conversation\n    ")]),i("div"),i("h1",[e._v("Vos conversations")]),e.listeConversation.length>0?i("ul",{staticClass:"liste"},e._l(e.listeConversation,function(t,n){return i("li",{key:t._id,attrs:{title:"Afficher la conversation avec "+t.nomConversation,value:n},on:{click:function(i){e.afficheMessage(t._id)}}},[i("div",[i("span",[e._v(e._s(t.nomConversation))]),i("span",[e._v(e._s(e.dateConversation(t.dernierDate)))]),i("span",[e._v(e._s(t.dernierUtilisateurEnvoi)+": "+e._s(t.dernierMessage))])])])}),0):i("ul",{staticClass:"liste"},[i("li",{staticClass:"aucune"},[e._v("Il n'y a aucune conversation pour le moment,\n        vous pouvez créer une conversation ci-dessus")])])]):i("div",[i("button",{staticClass:"nouveau-message",on:{click:function(t){e.afficheListeMessage=!0}}},[e._v("\n      Annuler\n    ")]),i("h1",[e._v("Nouvelle conversation")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.texteRecherche,expression:"texteRecherche"}],attrs:{type:"text",placeholder:"Recherche utilisateur"},domProps:{value:e.texteRecherche},on:{input:[function(t){t.target.composing||(e.texteRecherche=t.target.value)},function(t){e.afficheListeRecherche()}]}}),e.listeRecherche.length>0?i("div",{staticClass:"liste-utilisateur-recherche"},e._l(e.listeRecherche,function(t,n){return i("div",{key:t._id,staticClass:"un-utilisateur-recherche",class:{active:t.nomUtilisateur==e.utilisateurSelectionneRecherche},attrs:{value:n},on:{click:function(i){e.utilisateurSelectionneRecherche=t.nomUtilisateur}}},[e._v("\n        "+e._s(t.prenom)+" "+e._s(t.nom)+" "),i("b",[e._v("@"+e._s(t.nomUtilisateur))])])}),0):e._e(),0==e.listeRecherche.length&&""!==e.texteRecherche.trim()?i("div",{staticClass:"liste-utilisateur-recherche"},[i("div",{staticClass:"un-utilisateur-recherche"},[e._v("\n        Il n'y a aucun résultat pour la recherche « "+e._s(e.texteRecherche)+" »\n      ")])]):e._e(),""!=e.utilisateurSelectionneRecherche?i("span",{staticClass:"creerConvQuestion"},[e._v("\n      Voulez-vous créer une conversation avec "),i("b",[e._v("@"+e._s(e.utilisateurSelectionneRecherche))]),e._v("?\n    ")]):e._e(),""!=e.utilisateurSelectionneRecherche?i("button",{staticClass:"bouton-margin",on:{click:function(t){e.creerConversation()}}},[e._v("Créer la conversation")]):e._e()])])},Re=[],Oe={data:function(){return{afficheListeMessage:!0,texteRecherche:"",listeRecherche:[],utilisateurSelectionneRecherche:"",listeConversation:[]}},mounted:function(){var e=this;this.socket.on("UPDATE_CONVERSATION_LISTE",function(){e.afficheListeConversation()})},methods:{afficheMessage:function(e){this.$parent.mobileAfficheListeMessage=!0,this.$router.push("/Conversation/".concat(e))},afficheListeRecherche:function(){var e=this;""!==this.texteRecherche.trim()&&this.$http.get("/compte/recherche/".concat(this.texteRecherche),this.config).then(function(t){e.listeRecherche=t.data.splice(0,5)})},afficheListeConversation:function(){var e=this;this.$http.get("/conversation/",this.config).then(function(t){e.listeConversation=t.data})},dateConversation:function(e){var t=new Date(e),i="".concat((t.getDate()<10?"0":"")+t.getDate(),"/").concat((t.getMonth()<10?"0":"")+(t.getMonth()+1)," à ").concat(t.getHours(),"h").concat((t.getMinutes()<10?"0":"")+t.getMinutes());return i},creerConversation:function(){var e=this;this.$http.post("/conversation/".concat(this.utilisateurSelectionneRecherche),{},this.config).then(function(t){e.texteRecherche="",e.listeRecherche=[],e.utilisateurSelectionneRecherche="",e.$socket.emit("UPDATE_CONVERSATION_LISTE"),e.$router.push("/Conversation/".concat(t.data._id))}),this.afficheListeConversation(),this.afficheListeMessage=!0}},created:function(){this.afficheListeConversation(),localStorage.getItem("conversation")&&(this.$parent.mobileAfficheListeMessage=!0)}},De=Oe,je=(i("352b"),Object(_["a"])(De,we,Re,!1,null,null,null));je.options.__file="ListeMessage.vue";var Te=je.exports,Fe={components:{AfficheUnMessage:Me,ListeMessage:Te},data:function(){return{mobileAfficheListeMessage:!1}}},Ve=Fe,qe=(i("7487"),Object(_["a"])(Ve,ke,$e,!1,null,null,null));qe.options.__file="Conversation.vue";var Be=qe.exports,ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("popup-supprimer-publication",{attrs:{idPublication:e.supprimePublication},on:{close:function(t){e.supprimePublication=null,e.objetPublication=null}}}),i("popup-supprimer-commentaire",{attrs:{idCommentaire:e.supprimeCommentaire,idPublication:e.publicationSelection},on:{close:function(t){e.supprimeCommentaire=null}}}),i("popup-publication",{attrs:{objetPublication:e.objetPublication},on:{close:function(t){e.objetPublication=null},setIDPublication:e.supprimerPublication,setIDCommentaire:e.supprimerCommentaire,setListeAime:e.afficheListeAbonnement}}),i("popup-liste",{attrs:{typeListe:e.typeListeAbonnement,listeUtilisateur:e.listeAbonnementAAfficher},on:{close:function(t){e.typeListeAbonnement=null}}}),i("popup-photo-profil",{attrs:{affiche:e.popupPhotoProfil,photoActuel:e.photoPath},on:{close:function(t){e.popupPhotoProfil=!1}}}),i("popup-nouvelle-publication",{attrs:{affiche:e.popupNouvellePublication},on:{close:function(t){e.popupNouvellePublication=!1}}}),i("section",{staticClass:"profil"},[i("div",{staticClass:"entete-profil"},[i("div",{staticClass:"photo-profil",style:"background-image: url("+e.photoPath+";",on:{click:function(t){e.notreProfil?e.popupPhotoProfil=!0:e.popupPhotoProfil=!1}}},[e.notreProfil?i("div",{staticClass:"plus no-selection",attrs:{title:"Changer la photo de profil"}},[e._v("+")]):e._e()]),e.profilExiste?i("div",{staticClass:"information-profil"},[i("ul",[i("li",[i("b",[e._v(e._s(e.prenom)+" "+e._s(e.nom))])]),i("li",[i("b",[e._v("@"+e._s(e.nomUtilisateur))])]),i("li",[i("span",{attrs:{title:"Voir la liste des abonnés"},on:{click:function(t){e.afficheListeAbonnement(1)}}},[e._v("\n              "+e._s(e.listeAbonnes.length)+" abonné"),e.listeAbonnes.length>1?i("span",[e._v("s")]):e._e()]),e._v(" -\n            "),i("span",{attrs:{title:"Voir la liste des abonnements"},on:{click:function(t){e.afficheListeAbonnement(2)}}},[e._v("\n              "+e._s(e.listeAbonnement.length)+" abonnement\n            ")])]),e.notreProfil?i("li",[e.afficheModifProfil?e._e():i("button",{staticClass:"espace-droite",attrs:{title:"Modifier votre profil"},on:{click:e.afficheProfilModification}},[e._v("Modifier profil")]),i("button",{attrs:{title:"Publier une nouvelle publication"},on:{click:function(t){e.popupNouvellePublication=!0}}},[e._v("Nouvelle publication")])]):e._e(),e.notreProfil?e._e():i("li",[e.statusAbonnement?i("button",{staticClass:"espace-droite",attrs:{title:"Se désabonner de "+e.nomUtilisateur},on:{click:function(t){e.changeStatusAbonnement()}}},[e._v("Se désabonner")]):i("button",{staticClass:"espace-droite",attrs:{title:"S'abonner à "+e.nomUtilisateur},on:{click:function(t){e.changeStatusAbonnement()}}},[e._v("S'abonner")]),i("button",{attrs:{title:"Envoyer un message à "+e.nomUtilisateur},on:{click:function(t){e.creerConversation()}}},[e._v("Envoyer un message")])])])]):i("div",{staticClass:"information-profil"},[i("ul",[e._m(0),i("li",[e._v("Le profil recherché n'existe pas")]),i("br"),i("li",[i("router-link",{attrs:{to:"/Profil"}},[i("button",[e._v("Retourner à votre profil")])])],1),i("br")])])]),e.profilExiste?i("div",{staticClass:"selection-page-profil"},[i("div",{staticClass:"no-selection radius-left",class:{active:e.ongletPublication},attrs:{title:"Publication de l'utilisateur"},on:{click:function(t){e.changeOngletProfil(1)}}},[e._v("\n        Publication\n      ")]),i("div",{staticClass:"no-selection",class:{active:e.ongletInfoProfil},attrs:{title:"Information de l'utilisateur"},on:{click:function(t){e.changeOngletProfil(2)}}},[e._v("\n        À propos\n      ")]),i("div",{staticClass:"no-selection radius-right",class:{active:e.ongletFavoris},attrs:{title:"Publication aimées par l'utilisateur"},on:{click:function(t){e.changeOngletProfil(3)}}},[e._v("\n        Favoris\n      ")])]):e._e(),e.profilExiste?i("div",{staticClass:"contenu-profil"},[e.ongletPublication?i("div",{staticClass:"publication-profil"},[e.listePublication.length>0?i("grille-publication",{attrs:{liste:e.listePublication},on:{setObjetPublication:e.setObjetPublication}}):i("div",{staticClass:"aucune-publication"},[e._v("\n          Cet utilisateur n'a aucune publication.\n        ")])],1):e._e(),e.ongletInfoProfil?i("div",{staticClass:"a-propos-profil"},[i("div",{staticClass:"a-propos-section"},[i("div",{staticClass:"a-propos-titre"},[e._v("Membre depuis")]),i("div",{staticClass:"a-propos-info"},[e._v(e._s(e.dateCreation))])]),i("div",{staticClass:"a-propos-section"},[i("div",{staticClass:"a-propos-titre"},[e._v("Description")]),e.afficheModifProfil?i("div",{staticClass:"a-propos-info"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"a-propos-info-modif",attrs:{type:"text"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})]):i("div",{staticClass:"a-propos-info"},[e._v(e._s(e.description))])]),i("div",{staticClass:"a-propos-section"},[i("div",{staticClass:"a-propos-titre"},[e._v("Nombre de publications")]),i("div",{staticClass:"a-propos-info"},[e._v(e._s(e.listePublication.length))])]),i("div",{staticClass:"a-propos-section"},[i("div",{staticClass:"a-propos-titre"},[e._v("Nombre de photos aimées")]),i("div",{staticClass:"a-propos-info"},[e._v(e._s(e.listePublicationFavoris.length))])]),i("div",{staticClass:"a-propos-section"},[i("div",{staticClass:"a-propos-titre"},[e._v("Sexe")]),e.afficheModifProfil?i("div",{staticClass:"a-propos-info"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.sexe,expression:"sexe"}],attrs:{name:"sexe"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.sexe=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"Homme"}},[e._v("Homme")]),i("option",{attrs:{value:"Femme"}},[e._v("Femme")]),i("option",{attrs:{value:"Autre"}},[e._v("Autre")])])]):i("div",{staticClass:"a-propos-info"},[e._v(e._s(e.sexe))])]),i("div",{staticClass:"a-propos-section"},[i("div",{staticClass:"a-propos-titre"},[e._v("Site Internet")]),e.afficheModifProfil?i("div",{staticClass:"a-propos-info"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.site,expression:"site"}],staticClass:"a-propos-info-modif",attrs:{type:"text"},domProps:{value:e.site},on:{input:function(t){t.target.composing||(e.site=t.target.value)}}}),e.afficheModifProfil?i("button",{on:{click:e.sauvegarderAPropos}},[e._v("Sauvegarder")]):e._e(),e.afficheModifProfil?i("button",{on:{click:function(t){e.annuler()}}},[e._v("Annuler")]):e._e()]):i("div",{staticClass:"a-propos-info"},[i("a",{attrs:{href:e.site,target:"_blank"}},[e._v(e._s(e.site))])])])]):e._e(),e.ongletFavoris?i("div",{staticClass:"publication-profil"},[e.listePublicationFavoris.length>0?i("grille-publication",{attrs:{liste:e.listePublicationFavoris},on:{setObjetPublication:e.setObjetPublication}}):i("div",{staticClass:"aucune-publication"},[e._v("\n          Cet utilisateur n'a ajouté aucune publication dans ses favoris.\n        ")])],1):e._e()]):e._e()])],1)},He=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",[i("b",[e._v("Erreur")])])}],Ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.objetPublication?i("div",{staticClass:"popup popup-publication",on:{click:e.fermerPopupExterieur}},[i("affichage-une-publication",{attrs:{objetPublication:e.objetPublication},on:{setIDPublication:e.supprimerPublication,setIDCommentaire:e.supprimerCommentaire,setListeAime:e.afficheListeAime,fermerPopup:e.fermerPopup}})],1):e._e()},Je=[],Qe={props:{objetPublication:{required:!1,type:Object}},components:{AffichageUnePublication:W},methods:{fermerPopup:function(){this.$emit("close")},fermerPopupExterieur:function(e){"une-publication"===e.target.className&&this.$emit("close")},supprimerPublication:function(e){this.$emit("setIDPublication",e)},supprimerCommentaire:function(e,t){this.$emit("setIDCommentaire",e,t)},afficheListeAime:function(e){this.$emit("setListeAime",e)}}},Ze=Qe,Ye=(i("7481"),Object(_["a"])(Ze,Ge,Je,!1,null,null,null));Ye.options.__file="PopupPublication.vue";var We=Ye.exports,Xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.affiche?i("div",{staticClass:"popup",on:{click:e.fermerPopupExterieur}},[i("div",{staticClass:"modif-photo-profil"},[i("section",[i("h2",{attrs:{id:"popup"},on:{click:e.fermerPopup}},[i("font-awesome-icon",{attrs:{icon:"angle-left"}})],1),i("h1",[e._v("Modifier la photo de profil")]),i("span",[e._v("Sélectionner une nouvelle photo:")]),i("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.changementImage}}),i("span",{class:{"erreur-fort":e.erreurImage}},[e._v("L'image doit être de type JPEG\n        ou PNG et ne doit pas dépasser 5 Mo")]),e.apercuImage?i("div",[i("h3",[e._v("Aperçu de la photo:")]),i("div",{attrs:{id:"image"}})]):e._e(),i("div",[i("button",{on:{click:e.fermerPopup}},[e._v("Annuler")]),e.apercuImage?i("button",{on:{click:e.sauvegarderPhoto}},[e._v("Sauvegarder")]):e._e(),e.photoDefaut?e._e():i("button",{on:{click:e.retirerPhoto}},[e._v("Retirer la photo actuelle")])]),e.chargementPhotoProfil?i("div",{staticClass:"loader"}):e._e()])])]):e._e()},Ke=[],et={props:{affiche:{type:Boolean},photoActuel:{type:String}},watch:{affiche:function(){"photo-profil/photo-defaut.png"===this.$store.state.utilisateur.photoProfil?this.photoDefaut=!0:this.photoDefaut=!1,this.imageSelectionner=null,this.apercuImage=!1,this.erreurImage=!1,this.chargementPhotoProfil=!1}},data:function(){return{photoDefaut:Boolean,imageSelectionner:null,apercuImage:!1,erreurImage:!1,chargementPhotoProfil:!1}},methods:{changementImage:function(e){var t=new FileReader;e.target.files[0].type.match("image.*")?(this.apercuImage=!0,this.imageSelectionner=e.target.files[0]):(this.apercuImage=!1,this.imageSelectionner=null),t.onload=function(e){document.getElementById("image").style.backgroundImage="url('".concat(e.target.result,"')")},t.readAsDataURL(this.imageSelectionner)},fermerPopup:function(){this.$emit("close")},fermerPopupExterieur:function(e){"popup"===e.target.className&&this.$emit("close")},sauvegarderPhoto:function(){var e=this;if(!this.chargementPhotoProfil){this.erreurImage=!1,this.chargementPhotoProfil=!0;var t=new FormData;t.append("profilImage",this.imageSelectionner,this.imageSelectionner.name),this.$http.put("/compte/photo-de-profil/",t,this.config).then(function(){e.fermerPopup(),e.$socket.emit("UPDATE_PROFIL",e.$store.state.utilisateur.nomUtilisateur)}).catch(function(){e.chargementPhotoProfil=!1,e.erreurImage=!0})}},retirerPhoto:function(){var e=this;this.$http.put("/compte/retirer-photo-profil/",{},this.config).then(function(){e.fermerPopup(),e.$socket.emit("UPDATE_PROFIL",e.$store.state.utilisateur.nomUtilisateur)})}}},tt=et,it=(i("6c1e"),Object(_["a"])(tt,Xe,Ke,!1,null,null,null));it.options.__file="PopupPhotoProfil.vue";var nt=it.exports,ot=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",e._l(e.liste,function(t,n){return i("li",{key:n,attrs:{value:n},on:{click:function(t){e.ouvrirPopup(n)}}},[i("img",{staticClass:"publication-profil-image",attrs:{draggable:"false",src:"/"+t.photo,alt:"Publication de "+t.auteur}})])}),0)},at=[],st={props:{liste:Array},watch:{liste:function(){null!==this.$parent.objetPublication&&this.ouvrirPopup(this.currentIndex)}},data:function(){return{currentIndex:null}},methods:{ouvrirPopup:function(e){this.currentIndex=e,this.$emit("setObjetPublication",this.liste[e])}}},rt=st,lt=Object(_["a"])(rt,ot,at,!1,null,null,null);lt.options.__file="GrillePublication.vue";var ct=lt.exports,ut={data:function(){return{ongletPublication:!0,ongletInfoProfil:!1,ongletFavoris:!1,afficheModifProfil:!1,objetPublication:null,notreProfil:Boolean,profilExiste:!1,statusAbonnement:!1,listeAbonnementAAfficher:null,typeListeAbonnement:null,popupPhotoProfil:!1,popupNouvellePublication:!1,listePublication:[],listePublicationFavoris:[],supprimePublication:null,supprimeCommentaire:null,publicationSelection:null,nomUtilisateur:String,prenom:String,nom:String,listeAbonnes:Array,listeAbonnement:Array,dateCreation:String,description:String,sexe:String,site:String,photoPath:"/photo-profil/photo-defaut.png"}},components:{GrillePublication:ct,PopupPublication:We,PopupListe:Ce,PopupPhotoProfil:nt,PopupNouvellePublication:ne,PopupSupprimerPublication:ce,PopupSupprimerCommentaire:ve},watch:{$route:function(){this.typeListeAbonnement=null,this.verifieProfil(),this.afficheModifProfil=!1,this.objetPublication=null},listePublicationFavoris:function(){0===this.listePublicationFavoris.length&&this.ongletFavoris&&this.notreProfil&&(this.objetPublication=null)}},mounted:function(){var e=this;this.socket.on("UPDATE_PROFIL",function(t){void 0!==e.$route.params.nomutilisateur?t===e.$route.params.nomutilisateur.toLowerCase()&&e.verifieProfil():t===e.$store.state.utilisateur.nomUtilisateur&&e.verifieProfil()}),this.socket.on("UPDATE_ABONNEMENT_STATUS",function(t,i){void 0!==e.$route.params.nomutilisateur?t!==e.$route.params.nomutilisateur.toLowerCase()&&i!==e.$route.params.nomutilisateur.toLowerCase()||e.verifieProfil():t!==e.$store.state.utilisateur.nomUtilisateur&&i!==e.$store.state.utilisateur.nomUtilisateur||e.verifieProfil()})},methods:{changeOngletProfil:function(e){1===e?(this.ongletPublication=!0,this.ongletInfoProfil=!1,this.ongletFavoris=!1,this.annuler()):2===e?(this.ongletPublication=!1,this.ongletInfoProfil=!0,this.ongletFavoris=!1):3===e&&(this.ongletPublication=!1,this.ongletInfoProfil=!1,this.ongletFavoris=!0,this.annuler())},annuler:function(){this.notreProfil&&this.afficheModifProfil&&(this.afficheNotreProfil(),this.afficheModifProfil=!1)},afficheProfilModification:function(){this.afficheModifProfil=!0,this.changeOngletProfil(2)},sauvegarderAPropos:function(){var e=this;this.$http.put("/compte/profil/",{description:this.description,sexe:this.sexe,site:this.site},this.config).then(function(){e.afficheModifProfil=!1,e.$socket.emit("UPDATE_PROFIL",e.$store.state.utilisateur.nomUtilisateur)})},setObjetPublication:function(e){this.objetPublication=e},supprimerPublication:function(e){this.supprimePublication=e},supprimerCommentaire:function(e,t){this.supprimeCommentaire=e,this.publicationSelection=t},verifieProfil:function(){var e=this;H.a.resolve(this.$store.dispatch("infoUtilisateur")).then(function(){void 0===e.$route.params.nomutilisateur?(e.notreProfil=!0,e.profilExiste=!0,e.afficheNotreProfil(),e.affichePublication(e.$store.state.utilisateur.nomUtilisateur)):e.$store.state.utilisateur.nomUtilisateur===e.$route.params.nomutilisateur.toLowerCase()?(e.notreProfil=!0,e.profilExiste=!0,e.afficheNotreProfil(),e.affichePublication(e.$store.state.utilisateur.nomUtilisateur)):(e.notreProfil=!1,e.afficheAutreProfil(),e.affichePublication(e.$route.params.nomutilisateur.toLowerCase()))})},afficheNotreProfil:function(){this.nomUtilisateur=this.$store.state.utilisateur.nomUtilisateur,this.prenom=this.$store.state.utilisateur.prenom,this.nom=this.$store.state.utilisateur.nom,this.listeAbonnes=this.$store.state.utilisateur.listeAbonnes,this.listeAbonnement=this.$store.state.utilisateur.listeAbonnement,this.dateCreation=this.dateFormat(this.$store.state.utilisateur.dateCreation),this.description=this.$store.state.utilisateur.description,this.sexe=this.$store.state.utilisateur.sexe,this.site=this.$store.state.utilisateur.site,this.photoPath="/".concat(this.$store.state.utilisateur.photoProfil)},afficheAutreProfil:function(){var e=this;H.a.resolve(this.$http.get("/compte/recherche-nom-utilisateur/".concat(this.$route.params.nomutilisateur.toLowerCase()),this.config).then(function(t){e.profilExiste=!0,e.nomUtilisateur=t.data.nomUtilisateur,e.prenom=t.data.prenom,e.nom=t.data.nom,e.listeAbonnes=t.data.listeAbonnes,e.listeAbonnement=t.data.listeAbonnement,e.dateCreation=e.dateFormat(t.data.dateCreation),e.description=t.data.description,e.sexe=t.data.sexe,e.site=t.data.site,e.photoPath="/".concat(t.data.photoProfil)}).catch(function(){e.profilExiste=!1})).then(function(){e.verifieStatusAbonnement()})},dateFormat:function(e){return new Date(e).toLocaleDateString("fr-CA",{year:"numeric",month:"long",day:"numeric"})},creerConversation:function(){var e=this;this.$http.post("/conversation/".concat(this.$route.params.nomutilisateur.toLowerCase()),{},this.config).then(function(t){e.$socket.emit("UPDATE_CONVERSATION_LISTE"),localStorage.setItem("conversation",t.data._id),e.$router.push("/Conversation/".concat(t.data._id))})},changeStatusAbonnement:function(){var e=this;this.$http.put("/compte/abonnement-utilisateur/".concat(this.$route.params.nomutilisateur.toLowerCase()),{},this.config).then(function(){e.$socket.emit("UPDATE_ABONNEMENT_STATUS",e.$store.state.utilisateur.nomUtilisateur,e.$route.params.nomutilisateur.toLowerCase())})},verifieStatusAbonnement:function(){-1!==this.listeAbonnes.indexOf(this.$store.state.utilisateur.nomUtilisateur)?this.statusAbonnement=!0:this.statusAbonnement=!1},afficheListeAbonnement:function(e){1===e?(this.typeListeAbonnement="abonnés",this.listeAbonnementAAfficher=this.listeAbonnes):2===e?(this.typeListeAbonnement="abonnement",this.listeAbonnementAAfficher=this.listeAbonnement):(this.typeListeAbonnement="aime",this.listeAbonnementAAfficher=e)},affichePublication:function(e){var t=this;this.$http.get("/publication/utilisateur/".concat(e),this.config).then(function(e){t.listePublication=e.data}),this.$http.get("/publication/favoris/".concat(e),this.config).then(function(e){t.listePublicationFavoris=e.data})}},created:function(){this.verifieProfil()}},pt=ut,mt=(i("7cd8"),Object(_["a"])(pt,ze,He,!1,null,null,null));mt.options.__file="Profil.vue";var ht=mt.exports,ft=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"recherche"},[""!=e.texteRecherche&&e.listeRecherche.length>0?i("div",{staticClass:"haut-recherche"},[e._v("\n   Résultat de la recherche pour "),i("b",[e._v(e._s(e.texteRecherche))])]):e._e(),""==e.texteRecherche?i("div",{staticClass:"haut-recherche"},[e._v("\n    Cherchez dans la barre de recherche pour afficher des résultats\n  ")]):e._e(),""!=e.texteRecherche&&0===e.listeRecherche.length?i("div",{staticClass:"haut-recherche"},[e._v("\n    Il n'y a aucun résultat pour "),i("b",[e._v(e._s(e.texteRecherche))])]):e._e(),""!=e.texteRecherche&&e.listeRecherche.length>0?i("ul",{staticClass:"liste-recherche"},e._l(e.listeRecherche,function(t,n){return i("li",{key:t._id,attrs:{value:n}},[i("router-link",{attrs:{to:"/Profil/"+t.nomUtilisateur}},[i("div",{staticClass:"img-utilisateur no-selection"},[i("img",{attrs:{src:"/"+t.photoProfil,alt:"",draggable:"false"}})]),i("div",{staticClass:"nom-utilisateur"},[e._v("\n          "+e._s(t.prenom)+" "+e._s(t.nom)+"\n        ")])])],1)}),0):e._e()])},vt=[],dt={data:function(){return{texteRecherche:"",listeRecherche:Array}},watch:{$route:function(){this.afficheListe()}},created:function(){this.afficheListe()},methods:{afficheListe:function(){var e=this;""!==this.$route.params.input&&void 0!==this.$route.params.input?(this.texteRecherche=this.$route.params.input.trim(),this.$http.get("/compte/recherche/".concat(this.texteRecherche),this.config).then(function(t){e.listeRecherche=t.data})):this.texteRecherche=""}}},gt=dt,bt=(i("ea94"),Object(_["a"])(gt,ft,vt,!1,null,null,null));bt.options.__file="RechercheUtilisateur.vue";var Pt=bt.exports,_t=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"reglages"},[i("div",{staticClass:"boite-reglages"},[i("h1",[e._v("Réglages")]),i("div",{staticClass:"reglages-section"},[i("div",{staticClass:"reglages-titre"},[e._v("Adresse Email")]),e.reglagesEmail?i("div",{staticClass:"reglages-info"},[e.emailPasIdentique?i("b",[e._v("Les deux adresses email ne sont pas identiques")]):e._e(),e.emailExiste&&e.nouvelEmail.trim().toLowerCase()!==e.email?i("b",[e._v("\n          Un compte avec cet adresse email existe déjà\n        ")]):e._e(),e.emailExiste&&e.nouvelEmail.trim().toLowerCase()===e.email?i("b",[e._v("\n          Le nouvel adresse email doit être différent que votre adresse email actuel\n        ")]):e._e(),e.emailInvalide?i("b",[e._v("L'email doit être valide")]):e._e(),i("p",[e._v(e._s(e.email))]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.nouvelEmail,expression:"nouvelEmail"}],staticClass:"reglages-info-modif",attrs:{type:"email",placeholder:"Nouvelle adresse email",maxlength:"254"},domProps:{value:e.nouvelEmail},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.sauvegarder(1)},input:[function(t){t.target.composing||(e.nouvelEmail=t.target.value)},function(t){e.emailExiste&&(e.emailExiste=!1)}]}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.nouvelEmailConfirmation,expression:"nouvelEmailConfirmation"}],staticClass:"reglages-info-modif",attrs:{type:"email",placeholder:"Confirmer nouvelle adresse email",maxlength:"254"},domProps:{value:e.nouvelEmailConfirmation},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.sauvegarder(1)},input:[function(t){t.target.composing||(e.nouvelEmailConfirmation=t.target.value)},function(t){e.emailExiste&&(e.emailExiste=!1)}]}}),i("input",{attrs:{type:"submit",value:"Sauvegarder"},on:{click:function(t){e.sauvegarder(1)}}}),i("input",{attrs:{type:"submit",value:"Annuler"},on:{click:function(t){e.annuler(1)}}})]):i("div",{staticClass:"reglages-info"},[e.succesEmail?i("b",{staticClass:"succes"},[e._v("L'email a été changé avec succès")]):e._e(),i("span",[e._v(e._s(e.email))]),i("span",{attrs:{title:"Modifier l'email"},on:{click:function(t){e.modifier(1)}}},[e._v("Modifier")])])]),i("div",{staticClass:"reglages-section"},[i("div",{staticClass:"reglages-titre"},[e._v("Mot de passe")]),e.reglagesMDP?i("div",{staticClass:"reglages-info"},[e.mdpPasIdentique?i("b",[e._v("Les nouveaux mot de passe ne sont pas identiques")]):e._e(),e.mdpIncorrect?i("b",[e._v("Le mot de passe actuel est incorrect")]):e._e(),e.mdpInvalide?i("b",[e._v("Le nouveau mot de passe doit contenir au moins 7 caractères")]):e._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:e.mdpActuel,expression:"mdpActuel"}],staticClass:"reglages-info-modif",attrs:{maxlength:"60",type:"password",placeholder:"Mot de passe actuel"},domProps:{value:e.mdpActuel},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.sauvegarder(2)},input:function(t){t.target.composing||(e.mdpActuel=t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.mdpNouveau,expression:"mdpNouveau"}],staticClass:"reglages-info-modif",attrs:{maxlength:"60",type:"password",placeholder:"Nouveau mot de passe"},domProps:{value:e.mdpNouveau},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.sauvegarder(2)},input:function(t){t.target.composing||(e.mdpNouveau=t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.mdpNouveauConfirmation,expression:"mdpNouveauConfirmation"}],staticClass:"reglages-info-modif",attrs:{type:"password",placeholder:"Confirmer nouveau mot de passe",maxlength:"60"},domProps:{value:e.mdpNouveauConfirmation},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.sauvegarder(2)},input:function(t){t.target.composing||(e.mdpNouveauConfirmation=t.target.value)}}}),i("input",{attrs:{type:"submit",value:"Sauvegarder"},on:{click:function(t){e.sauvegarder(2)}}}),i("input",{attrs:{type:"submit",value:"Annuler"},on:{click:function(t){e.annuler(2)}}})]):i("div",{staticClass:"reglages-info"},[e.succesMDP?i("b",{staticClass:"succes"},[e._v("Le mot de passe a été changé avec succès")]):e._e(),i("span",[e._v("********")]),i("span",{attrs:{title:"Modifier le mot de passe"},on:{click:function(t){e.modifier(2)}}},[e._v("Modifier")])])]),i("div",{staticClass:"reglages-section"},[i("input",{attrs:{type:"submit",value:"Se déconnecter"},on:{click:e.deconnexion}})])])])},Ct=[],At={data:function(){return{email:"",reglagesEmail:!1,reglagesMDP:!1,nouvelEmail:"",nouvelEmailConfirmation:"",emailExiste:!1,emailInvalide:!1,emailPasIdentique:!1,succesEmail:!1,mdpActuel:"",mdpNouveau:"",mdpNouveauConfirmation:"",mdpPasIdentique:!1,mdpInvalide:!1,mdpIncorrect:!1,succesMDP:!1}},methods:{modifier:function(e){1===e?(this.reglagesEmail=!0,this.emailExiste=!1,this.emailInvalide=!1,this.emailPasIdentique=!1,this.nouvelEmail="",this.nouvelEmailConfirmation=""):2===e&&(this.mdpPasIdentique=!1,this.mdpInvalide=!1,this.mdpIncorrect=!1,this.mdpActuel="",this.mdpNouveau="",this.mdpNouveauConfirmation="",this.reglagesMDP=!0)},annuler:function(e){1===e?(this.reglagesEmail=!1,this.email=this.$store.state.utilisateur.email):2===e&&(this.reglagesMDP=!1)},sauvegarder:function(e){var t=this;1===e?this.$http.put("/compte/modifier-email/",{email:this.nouvelEmail,emailConfirmation:this.nouvelEmailConfirmation},this.config).then(function(){H.a.resolve(t.$store.dispatch("infoUtilisateur")).then(function(){t.email=t.$store.state.utilisateur.email,t.succesEmail=!0,setTimeout(t.fermerSucces,3e3)}),t.reglagesEmail=!1}).catch(function(){t.verifieEmail()}):2===e&&this.changeMDP()},verifieEmail:function(){var e=this,t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.$http.get("/compte/recherche-email/".concat(this.nouvelEmail),this.config).then(function(){e.nouvelEmail.trim().toLowerCase()!==e.nouvelEmailConfirmation.trim().toLowerCase()?(e.emailExiste=!1,e.emailInvalide=!1,e.emailPasIdentique=!0):(e.emailExiste=!1,e.emailInvalide=!t.test(String(e.nouvelEmail).toLowerCase()),e.emailPasIdentique=!1)}).catch(function(){e.nouvelEmail.trim().toLowerCase()!==e.nouvelEmailConfirmation.trim().toLowerCase()?(e.emailExiste=!1,e.emailInvalide=!1,e.emailPasIdentique=!0):t.test(String(e.nouvelEmail).toLowerCase())?(e.emailExiste=!0,e.emailInvalide=!1,e.emailPasIdentique=!1):(e.emailExiste=!1,e.emailInvalide=!0,e.emailPasIdentique=!1)})},changeMDP:function(){var e=this;this.mdpNouveauConfirmation.length<7?(this.mdpInvalide=!0,this.mdpPasIdentique=!1,this.mdpIncorrect=!1):this.mdpNouveau!==this.mdpNouveauConfirmation?(this.mdpPasIdentique=!0,this.mdpInvalide=!1,this.mdpIncorrect=!1):this.$http.put("/compte/modifier-mot-de-passe/",{mdpActuel:this.mdpActuel,nouveauMDP:this.mdpNouveau,nouveauMDPConfirmation:this.mdpNouveauConfirmation},this.config).then(function(){e.reglagesMDP=!1,e.succesMDP=!0,setTimeout(e.fermerSucces,3e3)}).catch(function(){e.mdpInvalide=!1,e.mdpPasIdentique=!1,e.mdpIncorrect=!0})},fermerSucces:function(){this.succesEmail=!1,this.succesMDP=!1},deconnexion:function(){g.deconnexion(),window.location.reload()}},created:function(){var e=this;H.a.resolve(this.$store.dispatch("infoUtilisateur")).then(function(){e.email=e.$store.state.utilisateur.email})}},It=At,xt=(i("55f7"),Object(_["a"])(It,_t,Ct,!1,null,null,null));xt.options.__file="Reglages.vue";var Et=xt.exports,kt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"page-erreur"},[i("div",{staticClass:"erreur-desc"},[i("h1",[e._v("Page indisponible")]),i("p",[e._v("La page recherchée n'existe pas.\n      "),i("router-link",{attrs:{to:"/"}},[e._v("Retourner à la page d'accueil")])],1)])])},$t=[],yt=(i("91c9"),{}),Ut=Object(_["a"])(yt,kt,$t,!1,null,null,null);Ut.options.__file="Erreur.vue";var St=Ut.exports;n["a"].use(M["a"]);var Lt=new M["a"]({routes:[{path:"/",name:"page-principale",component:V},{path:"/Conversation",component:Be},{path:"/Conversation/:nom",component:Be,props:{nom:!0}},{path:"/Profil",component:ht},{path:"/Profil/:nomutilisateur",component:ht,props:{nomutilisateur:!0}},{path:"/Recherche",component:Pt},{path:"/Recherche/:input",component:Pt,props:{input:!0}},{path:"/FilActualite",component:Ee},{path:"/Reglages",component:Et},{path:"/Page-introuvable",component:St},{path:"*",redirect:"/Page-introuvable"}]}),Nt=i("2f62");n["a"].use(Nt["a"]);var Mt=new Nt["a"].Store({state:function(){return{utilisateur:[]}},actions:{infoUtilisateur:function(e){var t=e.commit,i={headers:{"Content-Type":"application/json","x-auth-token":JSON.parse(localStorage.getItem("token"))}};return c.a.get("/api/compte/moi",i).then(function(e){t("APPLY_USER_CHANGE",{compte:e.data})})}},mutations:{APPLY_USER_CHANGE:function(e,t){var i=t.compte;e.utilisateur=i}}});u["c"].add(p["f"],p["h"],p["g"],p["e"],p["i"],p["c"],p["d"],p["a"],p["b"]),n["a"].component("font-awesome-icon",m["a"]),n["a"].prototype.$http=c.a.create({baseURL:"/api/"}),n["a"].prototype.socket=a()("/"),n["a"].prototype.config={headers:{"Content-Type":"application/json","x-auth-token":JSON.parse(localStorage.getItem("token"))}},Lt.beforeEach(function(e,t,i){g.verifieToken();var n=g.tokenVide(),o="/"===e.path;n&&o?i():!n&&o?i("/FilActualite"):n?i("/"):i()}),n["a"].config.productionTip=!1,new n["a"]({router:Lt,store:Mt,render:function(e){return e(N)}}).$mount("#app"),n["a"].use(r.a,"/")},"5c0b":function(e,t,i){"use strict";var n=i("5e27"),o=i.n(n);o.a},"5c4a":function(e,t,i){},"5e27":function(e,t,i){},6051:function(e,t,i){},"68dc":function(e,t,i){},"6c1e":function(e,t,i){"use strict";var n=i("5c4a"),o=i.n(n);o.a},7152:function(e,t,i){"use strict";var n=i("c97e"),o=i.n(n);o.a},7481:function(e,t,i){"use strict";var n=i("8324"),o=i.n(n);o.a},7487:function(e,t,i){"use strict";var n=i("68dc"),o=i.n(n);o.a},"7cd8":function(e,t,i){"use strict";var n=i("7d1f"),o=i.n(n);o.a},"7d1f":function(e,t,i){},"7eeb":function(e,t,i){"use strict";var n=i("abf3"),o=i.n(n);o.a},8324:function(e,t,i){},"91c9":function(e,t,i){"use strict";var n=i("45dd"),o=i.n(n);o.a},a3ea:function(e,t,i){},abf3:function(e,t,i){},b3ed:function(e,t,i){"use strict";var n=i("075c"),o=i.n(n);o.a},be86:function(e,t,i){},c97e:function(e,t,i){},d66a:function(e,t,i){"use strict";var n=i("35bc"),o=i.n(n);o.a},de8c:function(e,t,i){},ea94:function(e,t,i){"use strict";var n=i("a3ea"),o=i.n(n);o.a},ec16:function(e,t,i){},ee27:function(e,t,i){},ef65:function(e,t,i){"use strict";var n=i("6051"),o=i.n(n);o.a},fedb:function(e,t,i){"use strict";var n=i("42cb"),o=i.n(n);o.a}});
//# sourceMappingURL=app.aea3671c.js.map